input_format_version: 0
title: IEA Wind Task 37 Wind Energy System Ontology version 0.1
description: A file used as input of a wind farm model
required:
  - name
  - site
  - wind_farm # Or something referring to the built or "designable" wind energy conversion system


# PROPERTIES
properties:
  #~
  name:
    title: Name
    description: Name of the wind energy system
    type: string
  #~
  site:
    $ref: "site.yaml"
  # #~
  wind_farm:
    $ref: "wind_farm.yaml"
  #~
  attributes:
    title: Attributes
    description: Specific attributes of the entire wind energy system
    type: object
    properties:
      #~~
      flow_model:
        title: Flow model
        description: Flow model used in wind farm design
        type: object
        additionalProperties: true
        properties:
          name:
            title: Flow model name
            type: string
            enum: ["foxes", "pywake", "saturne", "KUL"]
      analyses:
        wake_model:
          title: Deficit model
          description: Wake deficit model used in AEP calculations
          type: object
          additionalProperties: true
          properties:
            name:
              title: Wake model name
              type: string
              enum: ["Jensen", "Bastankhah"]
            k:
              title: wake expansion coefficient
              type: float
            ceps:
              title: Bastankhah c_epsilon factor
              type: float
            
        deflection_model:
          title: Deflection model
          description: Deflection model used in AEP calculations
          type: object
          additionalProperties: true
          properties:
            name:
              title: Deflection model name
              type: string
              enum: ["Jimenez"]
            beta:
              title: Jimenez deflection coefficient
              type: float
            
        turbulence_model:
          title: Turbulence model
          description: Turbulence model used in AEP calculations
          type: object
          additionalProperties: true
          properties:
            name:
              title: Turbulence model name
              type: string
              enum: ["STF2005", "STF2017"]
            c1:
              title: STF C1
              type: float
            c2:
              title: STF C2
              type: float
            
        superposition_model:
          title: Superposition model
          description: Superposition model used in AEP calculations
          type: object
          additionalProperties: true
          properties:
            name:
              title: Superposition model name
              type: string
              enum: ["Linear", "Sqared"]
        rotor_averaging:
          title: Rotor model
          description: Rotor averaging model used in AEP calculations
          type: object
          additionalProperties: true
          properties:
            name:
              title: Rotor model name
              type: string
              enum: ["center", 'avg_deficit', 'avg_velocity', 'cubic_avg_velocity']
        blockage:
          title: Blockage model
          description: Blockage averaging model used in AEP calculations
          type: object
          additionalProperties: true
          properties:
            name:
              title: Blockage model name
              type: string
              enum: ['None', 'SelfSimilarityDeficit2020']
            ss_alpha:
              title: ss_alpha factor for SelfSimilarityDeficit2020
              type: float


      outputs:  
        title: Outputs
        description: Output parameters and configurations for the wind energy system
        type: object
        properties:
          AEP:
            title: Annual Energy Production
            description: Flag to include Annual Energy Production in the output
            type: boolean
          AEP_per_turbine:
            title: AEP per Turbine
            description: Flag to include Annual Energy Production per turbine in the output
            type: boolean
          name:  # New property added
            title: Output Name
            description: Name for the output configuration
            type: string
          power_percentiles:
            title: Power Percentiles
            description: Configuration for reporting power percentiles
            type: object
            properties:
              report:
                title: Report
                description: Flag to include power percentiles in the output
                type: boolean
              percentiles:
                title: Percentiles
                description: List of percentiles to report
                type: array
                items:
                  type: integer
          flow_field:
            title: Flow Field
            description: Configuration for flow field output
            type: object
            properties:
              time:
                title: Time
                description: Specific times for flow field output
                type: array
                items:
                  type: integer
              output_variables:
                title: Output Variables
                description: List of flow field variables to output
                type: array
                items:
                  type: string
          power_table:
            title: Power Table
            description: Specific power table configurations
            type: array
            items:
              type: string

